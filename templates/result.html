{% extends "base.html" %}

{% block title %}Plant Health Report | GreenScan{% endblock %}
{% block body_class %}result-page{% endblock %}

{% block content %}

<!-- ===================== RESULT PAGE CONTAINER ===================== -->
<div class="result-container">

    <!-- ===================== ABOVE THE FOLD ===================== -->
    <div class="result-box">

        <!-- Image -->
        <div class="result-img-container">
            <img src="{{ imagepath }}" alt="Uploaded Image" class="result-image">
        </div>

        <!-- Text -->
        <div class="result-text">
            <h3>Plant Health Report</h3>

            <div class="result-details">

                {% if result_type == "irrelevant" %}

                    {% for paragraph in user_message.split('\n\n') %}
                        <p class="value">
                            {{ paragraph }}
                        </p>
                    {% endfor %}

                {% else %}

                    <div class="label-value-group">
                        <p class="label">Plant</p>
                        <p class="value">{{ plant_name }}</p>
                    </div>

                    <div class="label-value-group">
                        <p class="label">
                            {% if disease_name == "No disease detected." %}
                                Status
                            {% else %}
                                Disease
                            {% endif %}
                        </p>
                        <p class="value">{{ disease_name }}</p>
                    </div>

                    {% if disease_name != "No disease detected." %}
                        <div class="label-value-group">
                            <p class="label">Cause</p>
                            <p class="value">{{ disease_cause }}</p>
                        </div>
                    {% else %}
                        <div class="label-value-group">
                            <p class="label">Recommendation</p>
                            <p class="value">{{ disease_cure }}</p>
                        </div>
                    {% endif %}

                {% endif %}

            </div>

            {% if result_type == "irrelevant" %}
                <a href="{{ url_for('upload') }}" class="scan-btn">
                    UPLOAD A PLANT LEAF IMAGE
                </a>
            {% elif disease_name != "No disease detected." %}
                <a href="#treatment-section" class="scan-btn">
                    CLICK HERE TO SEE TREATMENT
                </a>
            {% else %}
                <a href="{{ url_for('upload') }}" class="scan-btn">
                    ANALYZE ANOTHER PLANT
                </a>
            {% endif %}
        </div>

    </div>

    <!-- ===================== BELOW THE FOLD (DISEASE ONLY) ===================== -->
    {% if result_type != "irrelevant" and disease_name != "No disease detected." %}
    <div id="treatment-section" class="result-box reverse-layout">

        <!-- Image -->
        <div class="result-img-container">
            {% if cure_manufacturer_logo %}
                <img
                    src="{{ url_for('static', filename=cure_manufacturer_logo.replace('static/', '')) }}"
                    alt="{{ cure_manufacturer }} Logo"
                    class="result-image"
                >
            {% else %}
                <p class="value">No manufacturer logo available</p>
            {% endif %}
        </div>

        <!-- Text -->
        <div class="result-text">
            <h3>Suggested Treatment</h3>

            <div class="result-details">
                <div class="label-value-group">
                    <p class="label">Cure</p>
                    <p class="value">{{ disease_cure }}</p>
                </div>

                <div class="label-value-group">
                    <p class="label">Manufacturer</p>
                    <p class="value">{{ cure_manufacturer if cure_manufacturer else "N/A" }}</p>
                </div>

                <div class="label-value-group">
                    <p class="label">Details</p>
                    <p class="value">{{ disease_details if disease_details else disease_cure }}</p>
                </div>
            </div>

            <a href="{{ url_for('upload') }}" class="scan-btn">
                ANALYZE ANOTHER PLANT
            </a>
        </div>

    </div>
    {% endif %}

</div>

{% endblock %}
